
            <script>
            am5.ready(function() {
        
            // Create rootBourges element
            // https://www.amcharts.com/docs/v5/getting-started/#rootBourges_element
            var rootBourges = am5.Root.new("chartdivBourges");
            
            
            // Set themes
            // https://www.amcharts.com/docs/v5/concepts/themes/
            rootBourges.setThemes([
              am5themes_Animated.new(rootBourges),
              am5themes_Responsive.new(rootBourges),
            ]);
            
            
            // Create the map chart
            // https://www.amcharts.com/docs/v5/charts/map-chart/
            var chart = rootBourges.container.children.push(am5map.MapChart.new(rootBourges, {
              panX: "translateX",
              panY: "translateY",
              positionX: 46,
              rotationY: 2,
              projection: am5map.geoMercator()
            }));
        
            var cont = chart.children.push(am5.Container.new(rootBourges, {
              layout: rootBourges.horizontalLayout,
              x: 20,
              y: 40
            }));
            
            
            // Add labels and controls
            cont.children.push(am5.Label.new(rootBourges, {
              centerY: am5.p50,
              text: "Map"
            }));
            
            var switchButton = cont.children.push(am5.Button.new(rootBourges, {
              themeTags: ["switch"],
              centerY: am5.p50,
              icon: am5.Circle.new(rootBourges, {
                themeTags: ["icon"]
              })
            }));
            
            switchButton.on("active", function() {
              if (!switchButton.get("active")) {
                chart.set("projection", am5map.geoMercator());
                chart.set("panX", "translateX");
                chart.set("panY", "translateY");
              }
              else {
                chart.set("projection", am5map.geoOrthographic());
                chart.set("panX", "rotateX");
                chart.set("panY", "rotateY");
              }
            });
            
            cont.children.push(am5.Label.new(rootBourges, {
              centerY: am5.p50,
              text: "Globe"
            }));
            
            // Create main polygon series for countries
            // https://www.amcharts.com/docs/v5/charts/map-chart/map-polygon-series/
            var polygonSeries = chart.series.push(am5map.MapPolygonSeries.new(rootBourges, {
              geoJSON: am5geodata_worldLow
            }));
        
            
            var graticuleSeries = chart.series.push(am5map.GraticuleSeries.new(rootBourges, {}));
            graticuleSeries.mapLines.template.setAll({
              stroke: rootBourges.interfaceColors.get("alternativeBackground"),
              strokeOpacity: 0.08
            });
            
            // Create line series for trajectory lines
            // https://www.amcharts.com/docs/v5/charts/map-chart/map-line-series/
            var lineSeries = chart.series.push(am5map.MapLineSeries.new(rootBourges, {}));
            lineSeries.mapLines.template.setAll({
              stroke: rootBourges.interfaceColors.get("alternativeBackground"),
              strokeOpacity: 0.6,
              strokeWidth: 5,
            });
            
            // destination series
            var citySeries = chart.series.push(
              am5map.MapPointSeries.new(rootBourges, {})
            );
            
            citySeries.bullets.push(function() {
              var circle = am5.Circle.new(rootBourges, {
                radius: 5,
                tooltipText: "{title}",
                tooltipY: 0,
                fill: am5.color(0xffba00),
                stroke: rootBourges.interfaceColors.get("background"),
                strokeWidth: 2
              });
            
              return am5.Bullet.new(rootBourges, {
                sprite: circle
              });
            });
            
            // arrow series
            var arrowSeries = chart.series.push(
              am5map.MapPointSeries.new(rootBourges, {})
            );
            
            arrowSeries.bullets.push(function() {
              var arrow = am5.Graphics.new(rootBourges, {
                fill: am5.color(0x000000),
                stroke: am5.color(0x000000),
                draw: function (display) {
                  display.moveTo(0, -3);
                  display.lineTo(8, 0);
                  display.lineTo(0, 3);
                  display.lineTo(0, -3);
                }
              });
            
              return am5.Bullet.new(rootBourges, {
                sprite: arrow
              });
            });
            
            var cities = [
            {
    
                id: "belgique",
                title: "Belgique",
                geometry: { type: "Point", coordinates: [3.97, 50.86] },
                },
                {
                id: "canada",
                title: "Canada",
                geometry: { type: "Point", coordinates: [-112, 60] }
                }, {
                id: "etatsunis",
                title: "États-Unis",
                geometry: { type: "Point", coordinates: [-88.01, 41.83] }
                }, 
                {
                id: "paysbas",
                title: "Pays-bas",
                geometry: { type: "Point", coordinates: [4.94, 52.08] }
                },
                {
                id: "suisse",
                title: "Suisse",
                geometry: { type: "Point", coordinates: [7.90, 46.61] }
                },
                {
                id: "cat bourges",
                title: "Cathédrale Saint-Étienne de Bourges",
                geometry: { type: "Point", coordinates: [2.3970163, 47.0821675] },
              }];
            
            citySeries.data.setAll(cities);
            
            // prepare line series data
            var destinations = ["belgique","canada","etatsunis","paysbas","suisse"];
            // Bourges coordinates
            var originLongitude = 2.3970163;
            var originLatitude = 47.0821675;
            
            
            // Bourges -- Belgique
            am5.array.each(destinations, function (did) {
              var destinationDataItem = citySeries.getDataItemById(did);
              var lineDataItem = lineSeries.pushDataItem({ orientation: "vertical", geometry: { type: "LineString", coordinates: [[originLongitude, originLatitude], [3.97, 50.86]] } }); //[destinationDataItem.get("longitude"), destinationDataItem.get("latitude")]]
        
              arrowSeries.pushDataItem({
                lineDataItem: lineDataItem,
                positionOnLine: 0.5,
                autoRotate: true,
              });
            })
        
            // Bourges -- Canada
            am5.array.each(destinations, function (did) {
              var destinationDataItem = citySeries.getDataItemById(did);
              var lineDataItem = lineSeries.pushDataItem({ orientation: "vertical", geometry: { type: "LineString", coordinates: [[originLongitude, originLatitude], [-112, 60]] } }); //[destinationDataItem.get("longitude"), destinationDataItem.get("latitude")]]
        
              arrowSeries.pushDataItem({
                lineDataItem: lineDataItem,
                positionOnLine: 0.5,
                autoRotate: true,
              });
            })
        
            // Bourges -- Etatsunis
            am5.array.each(destinations, function (did) {
              var destinationDataItem = citySeries.getDataItemById(did);
              var lineDataItem = lineSeries.pushDataItem({ orientation: "vertical", geometry: { type: "LineString", coordinates: [[originLongitude, originLatitude], [-88.01, 41.83]] } }); //[destinationDataItem.get("longitude"), destinationDataItem.get("latitude")]]
        
              arrowSeries.pushDataItem({
                lineDataItem: lineDataItem,
                positionOnLine: 0.5,
                autoRotate: true,
              });
            })
        
            // Bourges -- Pays-Bas
            am5.array.each(destinations, function (did) {
              var destinationDataItem = citySeries.getDataItemById(did);
              var lineDataItem = lineSeries.pushDataItem({ orientation: "vertical", geometry: { type: "LineString", coordinates: [[originLongitude, originLatitude], [4.94, 52.08]] } }); //[destinationDataItem.get("longitude"), destinationDataItem.get("latitude")]]
        
              arrowSeries.pushDataItem({
                lineDataItem: lineDataItem,
                positionOnLine: 0.5,
                autoRotate: true,
              });
            })

            // Bourges -- Suisse
            am5.array.each(destinations, function (did) {
              var destinationDataItem = citySeries.getDataItemById(did);
              var lineDataItem = lineSeries.pushDataItem({ orientation: "vertical", geometry: { type: "LineString", coordinates: [[originLongitude, originLatitude], [7.90, 46.61]] } }); //[destinationDataItem.get("longitude"), destinationDataItem.get("latitude")]]
        
              arrowSeries.pushDataItem({
                lineDataItem: lineDataItem,
                positionOnLine: 0.5,
                autoRotate: true,
              });
            })
        
         
            
            polygonSeries.events.on("datavalidated", function () {
              chart.zoomToGeoPoint({ longitude: 2, latitude: 48 }, 15);
            })
            
            
            // Make stuff animate on load
            chart.appear(1000, 100);
            
            }); // end am5.ready()
